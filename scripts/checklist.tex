\documentclass[12pt,oneside]{memoir}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\pagestyle{empty}
\begin{document}
\chapter{Checklist for VM setup}
\section{Setting up first vm and clones}
\begin{enumerate}
\item Install virtualbox on your machine
\item Download latest C6 minimal iso from \\
\url{http://mirror.nsc.liu.se/CentOS/6.7/isos/x86_64/CentOS-6.7-x86_64-minimal.iso}
\item Install C6 minimal in virtualbox, with one hostonlyif and one intif
\item Boot up vm and configure
\begin{enumerate}
\item copy codesprint.tgz to vm and untar. 
\item Make /etc/hosts entry for all vms (see confs/settings in codesprint.tgz)
\item Set /etc/resolv.conf according to confs/settings file.
\item Replace /etc/sysconfig/iptables with confs/iptables
\item Run proxy.sh on VM host, as root.
\item yum update 
\item execute scripts/install-prereqs.sh
\item chkconfig --levels 345 ntpd on
\item Change /etc/resolv.conf to simply read `nameserver 10.1.1.2'
\item Shutdown esg-idx vm
\item Do full Clone (with reset of MAC addresses) of esg-idx to esg-idx2 and esg-data.
\end{enumerate}
\end{enumerate}
\section{Further setup on esg-idx}
\begin{enumerate}
\item Start up esg-idx
\item Change /etc/resolv.conf back to settings specified in conf/settings.
\item ntpdate -u 0.centos.pool.ntp.org
\item yum install bind
\item copy bind files from conf to /etc and /var/named; chown zone files to named:named in /var/named and start named.
\item chkconfig --levels 345 named on
\item set server 10.1.1.2 with nslookup and confirm external and internal looksups work.
\end{enumerate}
\section{Changes on esg-idx2 and esg-data}
\begin{enumerate}
\item Start up both esg-idx2 and esg-data
\item change hostname, modify ifcfg files with correct ip addresses and mac addresses.
\item service network restart
\item ntpdate -u 0.centos.pool.ntp.org /toggles /etc/resolv.conf values if needed.
\item After reverting to `nameserver 10.1.1.2', ensure external lookups and internal lookups work
\end{enumerate}
\section{Creating snapshots}
\begin{enumerate}
\item Shutdown all vms
\item Create snapshots for all vms.
\end{enumerate}
\section{Usage}
\begin{enumerate}
\item Start esg-idx vm first. After it boots up fully, do ntpdate sync. 
\item Start other vms and perform ntpdate sync.
\item The vms are ready to use.
\end{enumerate}
\end{document}
